Android Bundled 88ms index.ts (1 module)
 ERROR  expo-notifications: Android Push notifications (remote notifications) functionality provided by expo-notifications was removed from Expo Go with the release of SDK 53. Use a development build instead of Expo Go. Read more at https://docs.expo.dev/develop/development-builds/introduction/.
 WARN  `expo-notifications` functionality is not fully supported in Expo Go:
We recommend you instead use a development build to avoid limitations. Learn more: https://expo.fyi/dev-client.
 WARN  StatusBar backgroundColor is not supported with edge-to-edge enabled. Render a view under the status bar to change its background.
 WARN  StatusBar is always translucent when edge-to-edge is enabled. The translucent prop is ignored.
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: null
 LOG    - group: null
 LOG    - authLoading: true
 LOG    - groupLoading: true
 LOG    - Decision: AUTH FLOW
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: null
 LOG    - group: null
 LOG    - authLoading: false
 LOG    - groupLoading: true
 LOG    - Decision: AUTH FLOW
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: {"hasProfile": true, "id": "BWRJT9toAMcb77SnEPdauTN6UvB3", "name": "Flavien"}
 LOG    - group: {"id": "R2GDCH", "name": "Eskape Festival 2025"}
 LOG    - authLoading: false
 LOG    - groupLoading: false
 LOG    - Decision: MAIN APP
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 0
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: false
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 0
 LOG  📊 - User normal drinks: 0
 LOG  📊 - Session drinks result: 0
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: {"hasProfile": true, "id": "BWRJT9toAMcb77SnEPdauTN6UvB3", "name": "Flavien"}
 LOG    - group: {"id": "R2GDCH", "name": "Eskape Festival 2025"}
 LOG    - authLoading: false
 LOG    - groupLoading: false
 LOG    - Decision: MAIN APP
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 0
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 0
 LOG  📊 - User normal drinks: 0
 LOG  📊 - Session drinks result: 0
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📡 Drinks avant dédupe: 2 après dédupe: 2
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 2
 LOG  📡 User drinks: 0
 LOG  📡 Latest 3 drinks: [{"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}, {"id": "xInyRDtYwWhyScLJnJHe", "isTemplate": undefined, "timestamp": "00:24:23", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  🎭 === GÉNÉRATION ACTIVITÉS ===
 LOG  🎭 DrinkActivities: 0
 LOG  🎭 ZoneActivities: 0
 LOG  🎭 GroupZoneActivities: 0
 LOG  🎭 Final activities count: 0
 LOG  🎭 Recent activities: []
 LOG  🎭 === FIN GÉNÉRATION ACTIVITÉS ===
 LOG  ChatService - Total messages: 3
 LOG  ChatService - Image messages: 0
 LOG  🎭 === GÉNÉRATION ACTIVITÉS ===
 LOG  🎭 DrinkActivities: 3
 LOG  🎭 ZoneActivities: 0
 LOG  🎭 GroupZoneActivities: 0
 LOG  🎭 Converting drink activity: 5Uw1KPBjzMdGRbaFHOUa Arthur Ambiance nocturne avec Triche - Ça suit son cours ! 2
 LOG  🎭 Converting drink activity: Mx1ZVCb4rfkoK6LBMggm Arthur teste une Triche - Le festival commence ! 1
 LOG  🎭 Converting drink activity: uVBqVRHyvin8a4VvPS3a Arthur a rejoint le groupe undefined
 LOG  🎭 Final activities count: 3
 LOG  🎭 Recent activities: [{"id": "5Uw1KPBjzMdGRbaFHOUa", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:32"}, {"id": "Mx1ZVCb4rfkoK6LBMggm", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:24"}, {"id": "uVBqVRHyvin8a4VvPS3a", "message": "Arthur a rejoint le groupe", "timestamp": "00:24:04"}]
 LOG  🎭 === FIN GÉNÉRATION ACTIVITÉS ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 2
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 0
 LOG  📊 - User normal drinks: 0
 LOG  📊 - Session drinks result: 0
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  Expo Push token enregistré: ExponentPushToken[MKALSjOZaJeHHwABqhW6lZ]
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  📡 Drinks avant dédupe: 2 après dédupe: 2
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 2
 LOG  📡 User drinks: 0
 LOG  📡 Latest 3 drinks: [{"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}, {"id": "xInyRDtYwWhyScLJnJHe", "isTemplate": undefined, "timestamp": "00:24:23", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  🍺 === DÉBUT AJOUT BOISSON ===
 LOG  🍺 Group: R2GDCH
 LOG  🍺 User: BWRJT9toAMcb77SnEPdauTN6UvB3 Flavien
 LOG  🍺 DrinkData: {"alcoholDegree": 8, "brand": "", "category": "beer", "customName": "Rubus", "drinkType": "bouteille", "isTemplate": true, "volume": 33}
 LOG  🍺 CALCUL todayCount:
 LOG  🍺 - Total drinks loaded: 2
 LOG  🍺 - Today drinks (all users): 0
 LOG  🍺 - Today drinks (current user): 0
 LOG  🍺 - Today drinks IDs: []
 LOG  🍺 - Calculated todayCount: 1
 LOG  🍺 Drink added successfully: 3B3SYvA5772dlDv8JJQN
 LOG  🍺 === FIN AJOUT BOISSON ===
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  📡 Drinks avant dédupe: 3 après dédupe: 3
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 3
 LOG  📡 User drinks: 1
 LOG  📡 Latest 3 drinks: [{"id": "3B3SYvA5772dlDv8JJQN", "isTemplate": true, "timestamp": "23:46:56", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}, {"id": "xInyRDtYwWhyScLJnJHe", "isTemplate": undefined, "timestamp": "00:24:23", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 3
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 0
 LOG  📊 - User normal drinks: 0
 LOG  📊 - Session drinks result: 0
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 3
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 0
 LOG  📊 - User normal drinks: 0
 LOG  📊 - Session drinks result: 0
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  📡 Drinks avant dédupe: 3 après dédupe: 3
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 3
 LOG  📡 User drinks: 1
 LOG  📡 Latest 3 drinks: [{"id": "3B3SYvA5772dlDv8JJQN", "isTemplate": true, "timestamp": "23:46:56", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}, {"id": "xInyRDtYwWhyScLJnJHe", "isTemplate": undefined, "timestamp": "00:24:23", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  useDrinks - Consuming template for group: R2GDCH
 ERROR  Error syncing drink, saving locally: [FirebaseError: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/festivaltra-23d23/firestore/indexes?create_composite=ClBwcm9qZWN0cy9mZXN0aXZhbHRyYS0yM2QyMy9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJpbmtzL2luZGV4ZXMvXxABGgoKBnVzZXJJZBABGg0KCXRpbWVzdGFtcBABGgwKCF9fbmFtZV9fEAE]
 LOG  📡 Drinks avant dédupe: 5 après dédupe: 4
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 4
 LOG  📡 User drinks: 2
 LOG  📡 Latest 3 drinks: [{"id": "w0pkN52TuecJLvr5BOn4", "isTemplate": false, "timestamp": "23:47:07", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "3B3SYvA5772dlDv8JJQN", "isTemplate": true, "timestamp": "23:46:56", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: {"hasProfile": true, "id": "BWRJT9toAMcb77SnEPdauTN6UvB3", "name": "Flavien"}
 LOG    - group: {"id": "R2GDCH", "name": "Eskape Festival 2025"}
 LOG    - authLoading: false
 LOG    - groupLoading: false
 LOG    - Decision: MAIN APP
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  useDrinks - Template consumed successfully: w0pkN52TuecJLvr5BOn4
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 0
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 Retour: liste vide (pas de boissons)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 4
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 1
 LOG  📊 - User normal drinks: 1
 LOG  📊 - Session drinks result: 1
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  useDrinks - Setting up subscription for group: R2GDCH
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  📡 Drinks avant dédupe: 5 après dédupe: 4
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 4
 LOG  📡 User drinks: 2
 LOG  📡 Latest 3 drinks: [{"id": "w0pkN52TuecJLvr5BOn4", "isTemplate": false, "timestamp": "23:47:07", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "3B3SYvA5772dlDv8JJQN", "isTemplate": true, "timestamp": "23:46:56", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "sSRCJpYyqlGH7yOABhDU", "isTemplate": undefined, "timestamp": "00:24:32", "type": "Triche", "user": "oGQkEhRs3rY2eLMQHj43FriKLYH3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  🍺 === DÉBUT AJOUT BOISSON ===
 LOG  🍺 Group: R2GDCH
 LOG  🍺 User: BWRJT9toAMcb77SnEPdauTN6UvB3 Flavien
 LOG  🍺 DrinkData: {"alcoholDegree": 8, "brand": "", "category": "beer", "customName": "Rubus", "drinkType": "bouteille", "isTemplate": false, "volume": 33}
 LOG  🍺 CALCUL todayCount:
 LOG  🍺 - Total drinks loaded: 4
 LOG  🍺 - Today drinks (all users): 2
 LOG  🍺 - Today drinks (current user): 1
 LOG  🍺 - Today drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "isTemplate": false, "type": "bouteille"}]
 LOG  🍺 - Calculated todayCount: 2
 LOG  🎭 === GÉNÉRATION ACTIVITÉS ===
 LOG  🎭 DrinkActivities: 4
 LOG  🎭 ZoneActivities: 0
 LOG  🎭 GroupZoneActivities: 0
 LOG  🎭 Converting drink activity: SYuCE1IS61OjuhhzXqyn Flavien teste une Rubus - C'est sa 2ème ! 2
 LOG  🎭 Converting drink activity: 5Uw1KPBjzMdGRbaFHOUa Arthur Ambiance nocturne avec Triche - Ça suit son cours ! 2
 LOG  🎭 Converting drink activity: Mx1ZVCb4rfkoK6LBMggm Arthur teste une Triche - Le festival commence ! 1
 LOG  🎭 Converting drink activity: uVBqVRHyvin8a4VvPS3a Arthur a rejoint le groupe undefined
 LOG  🎭 Final activities count: 4
 LOG  🎭 Recent activities: [{"id": "SYuCE1IS61OjuhhzXqyn", "message": "Flavien se fait plaisir avec un Rubus! Verre n°2 ✨", "timestamp": "23:47:15"}, {"id": "5Uw1KPBjzMdGRbaFHOUa", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:32"}, {"id": "Mx1ZVCb4rfkoK6LBMggm", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:24"}]
 LOG  🎭 === FIN GÉNÉRATION ACTIVITÉS ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📡 Drinks avant dédupe: 6 après dédupe: 5
 LOG  📡 === LISTENER UPDATE ===
 LOG  📡 Total drinks received: 5
 LOG  📡 User drinks: 3
 LOG  📡 Latest 3 drinks: [{"id": "w0pkN52TuecJLvr5BOn4", "isTemplate": false, "timestamp": "23:47:07", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "2rM56PWNhRXMWkvtFybE", "isTemplate": false, "timestamp": "23:47:15", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "3B3SYvA5772dlDv8JJQN", "isTemplate": true, "timestamp": "23:46:56", "type": "bouteille", "user": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  📡 === FIN LISTENER UPDATE ===
 LOG  🍺 Drink added successfully: 2rM56PWNhRXMWkvtFybE
 LOG  🍺 === FIN AJOUT BOISSON ===
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔍 AppNavigator DEBUG:
 LOG    - user: {"hasProfile": true, "id": "BWRJT9toAMcb77SnEPdauTN6UvB3", "name": "Flavien"}
 LOG    - group: {"id": "R2GDCH", "name": "Eskape Festival 2025"}
 LOG    - authLoading: false
 LOG    - groupLoading: false
 LOG    - Decision: MAIN APP
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 1
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 1
 LOG  🔄 User drinks IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Session result: 1 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  🎭 === GÉNÉRATION ACTIVITÉS ===
 LOG  🎭 DrinkActivities: 4
 LOG  🎭 ZoneActivities: 0
 LOG  🎭 GroupZoneActivities: 0
 LOG  🎭 Converting drink activity: SYuCE1IS61OjuhhzXqyn Flavien teste une Rubus - C'est sa 2ème ! 2
 LOG  🎭 Converting drink activity: 5Uw1KPBjzMdGRbaFHOUa Arthur Ambiance nocturne avec Triche - Ça suit son cours ! 2
 LOG  🎭 Converting drink activity: Mx1ZVCb4rfkoK6LBMggm Arthur teste une Triche - Le festival commence ! 1
 LOG  🎭 Converting drink activity: uVBqVRHyvin8a4VvPS3a Arthur a rejoint le groupe undefined
 LOG  🎭 Final activities count: 4
 LOG  🎭 Recent activities: [{"id": "SYuCE1IS61OjuhhzXqyn", "message": "Flavien se fait plaisir avec un Rubus! Verre n°2 ✨", "timestamp": "23:47:15"}, {"id": "5Uw1KPBjzMdGRbaFHOUa", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:32"}, {"id": "Mx1ZVCb4rfkoK6LBMggm", "message": "Une triche de plus pour Arthur 🎯", "timestamp": "00:24:24"}]
 LOG  🎭 === FIN GÉNÉRATION ACTIVITÉS ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 5
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 2
 LOG  📊 - User normal drinks: 2
 LOG  📊 - Session drinks result: 2
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 WARN  Invalid userId provided to isNotificationTypeEnabled: {"groupId": "R2GDCH", "units": 4.22, "userName": "Flavien"}
 WARN  reading dataString is deprecated, use data instead
 LOG  Notification reçue: {"date": 1753998435464, "request": {"content": {"autoDismiss": true, "badge": null, "body": "Flavien a atteint 4.2 unités d'alcool", "categoryIdentifier": "DRINK_ALERT", "data": [Object], "dataString": "{\"alertLevel\":\"moderate\",\"type\":\"alert\"}", "priority": "default", "sound": "custom", "sticky": false, "subtitle": null, "title": "⚠️ Seuil modéré atteint"}, "identifier": "f15e7787-afb4-429f-bebf-be19f7a3f9bc", "trigger": null}}   
 LOG  useDrinks - Loading drinks for group: R2GDCH
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 === CALCUL SESSION ===
 LOG  📊 Total drinks: 5
 LOG  📊 UseEnhancedDetection: false
 LOG  📊 IsActivityTrackingAvailable: true
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  📊 Using BASIC detection:
 LOG  📊 - Normal drinks (all users): 2
 LOG  📊 - User normal drinks: 2
 LOG  📊 - Session drinks result: 2
 LOG  📊 === FIN CALCUL SESSION ===
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: oGQkEhRs3rY2eLMQHj43FriKLYH3
 LOG  🔄 User drinks après filtrage: 0
 LOG  🔄 User drinks IDs: []
 LOG  🔄 Retour: liste vide (pas de boissons pour cet user)
 LOG  🔄 === CALCUL getSessionDrinks ===
 LOG  🔄 Input drinks: 2
 LOG  🔄 userId: BWRJT9toAMcb77SnEPdauTN6UvB3
 LOG  🔄 User drinks après filtrage: 2
 LOG  🔄 User drinks IDs: [{"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}, {"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07", "userId": "BWRJT9toAMcb77SnEPdauTN6UvB3"}]
 LOG  🔄 Gap check: 23:47:07 -> 23:47:15
 LOG  🔄 Time diff: 0.1 minutes (0.0h)
 LOG  🔄 Break threshold: 4h (240min)
 LOG  🔄 Session result: 2 boissons
 LOG  🔄 Session IDs: [{"id": "w0pkN52TuecJLvr5BOn4", "timestamp": "23:47:07"}, {"id": "2rM56PWNhRXMWkvtFybE", "timestamp": "23:47:15"}]
 LOG  🔄 === FIN CALCUL getSessionDrinks ===
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
 LOG  useDrinks - Cleaning up subscription for group: R2GDCH
